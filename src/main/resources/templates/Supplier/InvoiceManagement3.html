<!DOCTYPE html>
<html xmlns:th="http://www.thymleaf.org">


<head th:replace="Supplier/Layout/supplier_layout :: cssSupplier">

</head>

<style>
td {
	text-align: center;
}

format_th_center{
	text-align: center;
}



#top__tool input[type=search] {
	min-height: calc(1.5em + .934rem + 2px);
	padding: .467rem .6rem;
	font-size: .9025rem;
	font-weight: 400;
	line-height: 1.5;
	color: #555252;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid #dfe3e7;
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	border-radius: .25rem;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
}


#preloader {
	background: #ccc url(/supplier/images/loader3.gif) no-repeat center;
	opacity: 0.9;
	background-size: 5%;
	height: 100vh;
	width: 100%;
	position: fixed;
	z-index: 100;
}

.margin__left {
	text-align: right;
}

.dataTable-sorter::before, .dataTable-sorter::after {
	/*display: none;*/
}
</style>

<!-- Add Jquery -->
<script src="https://code.jquery.com/jquery-3.7.0.js"
	integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
	crossorigin="anonymous"></script>
	</script>
	<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"
	integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA=="
	crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!--  <script th:src="@{/ckeditor/ckeditor.js}"></script> -->
<!-- bootstrap 5 -->


<script src="//cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
<!-- <script src="//cdn.ckeditor.com/4.22.1/basic/ckeditor.js"></script> -->


<body>
<link rel="shortcut icon" type="image/x-icon" th:href="@{/supplier/images/logo-coffee.jpg}" />
	<div id="preloader"></div>
	<div th:replace="Supplier/Layout/supplier_layout :: sidebarSupplier"></div>

	<div id="main">
	<nav th:replace="Supplier/Layout/supplier_layout :: navbarSupplier"></nav>

	<div class="main-content container-fluid">
	<!-- Add new here -->
	<!--  <button type="button" class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#full-scrn">
                        Full Screen Modal
                    </button> -->

                    <!-- full size modal-->
                    <div class="modal fade text-left w-100" id="full-scrn" tabindex="-1" role="dialog"
                        aria-labelledby="myModalLabel20" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-full" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h4 class="modal-title" id="myModalLabel20">Full Screen Modal</h4>
                            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                <i data-feather="x"></i>
                            </button>
                            </div>
                            <div class="modal-body">
                            Cake cupcake sugar plum. Sesame snaps pudding cupcake candy canes icing cheesecake. Sweet roll
                            pudding lollipop apple pie gummies drag√©e. Chocolate bar cookie caramels I love lollipop ice
                            cream tiramisu lollipop sweet.
                            </div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
                                <i class="bx bx-x d-block d-sm-none"></i>
                                <span class="d-none d-sm-block">Close</span>
                            </button>
                            <button type="button" class="btn btn-primary ml-1" data-bs-dismiss="modal">
                                <i class="bx bx-check d-block d-sm-none"></i>
                                <span class="d-none d-sm-block">Accept</span>
                            </button>
                            </div>
                        </div>
                        </div>
                    </div>
	<!-- End -->
	<!--  -->
	<div class="page-title">
				<div class="row">
					<div class="col-12 col-md-6 order-md-1 order-last">
						<h3>Invoice Management</h3>
					</div>
					<div class="col-12 col-md-6 order-md-2 order-first">
						<nav aria-label="breadcrumb" class='breadcrumb-header'>
							<ol class="breadcrumb">
								<li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
								<li class="breadcrumb-item active" aria-current="page">Invoice Management</li>
							</ol>
						</nav>
					</div>
				</div>
	</div>
	<!--  -->
		<section class="section tab-content">
				<div class="card">
					<div class="card-header">Order Management</div>
					
					<div class="card-body">
                            <table class='table table-striped' id="tbl_InvoiceManagement">
                                <thead>
                                    <tr>
                                   		<th style="text-align: center;">No</th>
                                        <th style="text-align: center;">Name</th>
                                        <th style="text-align: center;">Address</th>
                                        <th style="text-align: center;">Create Date</th>
                                        <th style="text-align: center;">Action</th>
                                        <th style="text-align: center;">Mandatory Process Date </th>
                                        <th style="text-align: center;">ViewDetails</th>
                                        
                                    </tr>
                                 </thead>
                                <tbody>
                                    <tr id ="" th:each="item ,key: ${collapseListInvoiceMgI}">
                                    	<td th:text="${key.index +1}">0</td>
                                        <td th:text="${item.nameCus}">Graiden</td>
                                        <td th:text="${item.address}">vehicula.aliquet@semconsequat.co.uk</td>
                                        <td th:text="${item.createDate}">076 4820 8838</td>
                                        <td th:switch="${item.status}">
                                        	<span th:case="0" style="color: #fdac41;">Watting</span>
                                        	<span th:case="1" style="color: purple">Processing</span>
                                        	<span th:case="2" style="color: #00cfdd">Cus Has Received</span>
                                        	<button th:case="3" id="btn_supConfirmForAdPayment" th:data-idInvoice="${item.id}" class="btn btn-outline-success">Confirm Received Money</button>
                                        	<span th:case="4" style="color: #39da8a">Success</span>
                                        	<span th:case="9" style="color: red">Cancelled</span>
                                        </td>
                                        <td th:text="${item.dateMaxC}">2024-01-20</td>
                                        <td>
                                        	<a th:data-idOfInvoi="${item.id}" class="btn btn-outline-warning" th:href="@{http://localhost:8080/Supplier/index-invoice-management/invoice-detail(idOfInvoice=${item.id}) }">
                                        		Detail
                                        	</a>
                                        </td>
                                      
                                       <!--  <td >
	                                        <button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#full-scrn">
	                                        	Detail
	                                        </button>
                                        </td> -->
                                       
                                    </tr>
                                </tbody>
                            </table>
                        </div>	
                        
				</div>
				
			</section>
				
		
	</div>
		

		<!-- End -->
		
		<footer th:replace="Supplier/Layout/supplier_layout :: footerSupplier"></footer>
	</div>


    <!-- start script -->
	<div th:replace="Supplier/Layout/supplier_layout :: scriptSupplier"></div>

	<script th:src="@{/supplier/vendors/quill/quill_min.js}"></script>
	<script th:src="@{/supplier/js/form_editor.js}"></script>
	<script
		th:src="@{/supplier/vendors/simple-datatables/simple-datatables.js}"></script>

	<script>
	  //hideSearch();
	  //document.getElementById("icon_supplier").setAttribute("href", "/supplier/images/coffee3.png");
	  document.getElementById("title_supplier").textContent="Supplier - Order management ";
	  var loader = document.getElementById("preloader");
      window.addEventListener("load", function () {
          setTimeout(function(){
              loader.style.display = "none";
          },100);
          
      });
      //------------New
      // Simple Datatable
		let table = document.querySelector('#tbl_InvoiceManagement');
		let dataTable = new simpleDatatables.DataTable(table);
	
		//------------------NEW
		function reloadPage(idOfInvoice) {
			debugger
			let url = `http://localhost:8080/Supplier/index-invoice-management`;///invoice-detail?idOfInvoice=${idOfInvoice}
			window.location.href = url;
		}
		//
		$('#btn_supConfirmForAdPayment').on('click', function (e) {
			debugger
			let idInvoice = $("#btn_supConfirmForAdPayment").attr("data-idInvoice");
			let idSupp = 1;
			$.ajax({
				type: "Get",
				url:"http://localhost:8080/Supplier/sup-confirm-adPayment" ,
				data: {
					"idSupp": idSupp,
					"idInvoice": idInvoice
				},
				success: (res)=>{
					//alert("data: "+res);
					setTimeout(function() {
						reloadPage(idInvoice);						
					  }, 3000);
					Swal.fire({
			    		  position: 'top-center',
			    		  icon: 'success',
			    		  title: 'Order is completed',
			    		  showConfirmButton: false,
			    		  timer: 2500
			    		});
				},
				error: (err)=>{
					console.log("supp confirm adPayment err: "+err);
				}
			});
		});
		
	</script>



</body>

</html>